scriptLoad=function(){var a={},b={css:{},javascript:{}},c={},d=function(){this._event={},this.setEvent=function(a,b){"undefined"!=typeof a&&"function"==typeof b&&(this._event[a]=b)},this.runEvent=function(a){return this.runEventPro(a)()},this.runEventPro=function(a){return this._event[a]}},e=function(){d.apply(this);var a=this;this._option={src:null,taskType:null,element:{},status:"ready",ver:0,validity:function(){},callBack:function(){},defaultOption:!0},this._event={beforeLoad:function(){return!0},afterLoad:function(){},baseBeforeLoad:function(){if("complete"==a.getOption("status"))return!1;if("undefined"!=typeof i.getRely(a.getOption("src"))&&"undefined"!=typeof i.getRely(a.getOption("src")).rely)for(var b in i.getRely(a.getOption("src")).rely)if("complete"!=h.selectTask(b).getOption("status"))return!1;return a.runEvent("beforeLoad")},baseAfterLoad:function(){if(a.setOption({status:"complete"}),a.runEvent("afterLoad"),"undefined"!=typeof i.getRely(a.getOption("src"))&&"undefined"!=typeof i.getRely(a.getOption("src")).beRely)for(var b in i.getRely(a.getOption("src")).beRely)h.selectTask(b).run()}},this.setOption=function(a){var b,c,d,e;for(b in a)switch(this._option[b]=a[b],b){case"rely":c={},a["rely"]instanceof String&&(d=a["rely"],a["rely"]=new Array(d));for(e in a["rely"])switch(!0){case a["rely"]instanceof Array:h.hasTask(a["rely"][e])&&h.addTask(this.getOption("taskType"),a["rely"][e]),i.addRely(this.getOption("src"),a["rely"][e]),c[a["rely"][e]]=a["rely"][e];break;case a["rely"]instanceof Object:h.hasTask(e)?h.addTask(this.getOption("taskType"),e,a["rely"][e]):h.selectTask(e).setOption(a["rely"][e]),i.addRely(this.getOption("src"),e),c[e]=a["rely"][e]}this._option[b]=c;break;case"callBack":this.setEvent("afterLoad",a[b]);break;case"validity":this.setEvent("beforeLoad",a[b])}},this.getOption=function(a){return"undefined"==typeof a?this._option:this._option[a]},this._createElement=function(){var a=document.createElement(this._option["element"]["type"]);return a.readyState?a.onreadystatechange=function(){("loaded"==a.readyState||"complete"==a.readyState)&&(a.onreadystatechange=null,this.runEvent("baseAfterLoad"))}:a.onload=this.runEventPro("baseAfterLoad"),a},this._taskElement=function(){},this._taskSrc=function(){return this._option["src"]+"?ver="+this._option["ver"]},this._runLoad=function(){document.getElementsByTagName("head")[0].appendChild(this._taskElement())},this.run=function(){this.runEvent("baseBeforeLoad")&&this._runLoad()}},f=function(a,b){e.apply(this),this.setOption({src:a,taskType:"javascript",element:{type:"script"}}),"object"==typeof b&&(b["defaultOption"]=!1,this.setOption(b)),this._taskElement=function(){var a=this._createElement();return a.type="text/javascript",a.src=this._taskSrc(),a}},g=function(a,b){e.apply(this),this.setOption({src:a,taskType:"css",element:{type:"link"}}),"object"==typeof b&&(b["defaultOption"]=!1,this.setOption(b)),this._taskElement=function(){var a=this._createElement();return a.rel="stylesheet",a.href=this._taskSrc(),a}},h={_taskHas:{javascript:f,css:g},addTask:function(c,d,e){a[d]=new h._taskHas[c](d,e),"undefined"==typeof b[c]&&(b[c]={}),b[c][d]=d},selectTask:function(b){return a[b]},hasTask:function(b){return"undefined"==typeof a[b]}},i={addRely:function(a,b){"object"!=typeof c[a]&&(c[a]={rely:{},beRely:{}}),"object"!=typeof c[b]&&(c[b]={rely:{},beRely:{}}),c[a]["rely"][b]=b,c[b]["beRely"][a]=a},getRely:function(a){return c[a]}},j=function(a,b,c){return h.addTask(a,b,c),this},k=function(b){for(var c in a)"object"==typeof b&&a[c].getOption("defaultOption")&&a[c].setOption(b),a[c].run()};return _method={addTask:j,run:k}}();